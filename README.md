
# Bot Template

This is a lightweight, modular template for building trading bot applications. It provides a foundation for core features and serves as an example of how to structure app and data persistence.

Features:

- Notifications: Integrated support for Telegram and Discord.
- Database: SQLite integration for local data management.
  - Store OHLC (Open, High, Low, Close) data by ticker and interval.
  - Data Management: Easily configure and update settings directly in the database.
- Configuration: Externalized configuration file for environment-specific settings.
- Logging: Comprehensive log system for debugging and monitoring.
- Scheduling: Built-in cronjob functionality for automated tasks.
- Containerization: Ready-to-use Dockerfile for seamless deployment.

Tech Stack:

- Language: Python 3.13
- Framework: FastAPI
- Database: SQLite
- Deployment: Docker

This project is still under development. Expect major updates, including architectural changes and new features, as development continues.

## Quick Start

### Prerequisites

- [UV](https://docs.astral.sh/uv/getting-started/): an extremely fast Python package and project manager, written in Rust.
- [Docker Desktop](https://www.jetbrains.com/phpstorm/): powerful container tools (optional)
- [Podman](https://podman.io/) alternative for Docker (optional)


###  Clone and Start

```bash
git clone git@github.com:r1quant/template-bot.git
cd template-bot
```

###  .env file

Rename `.env-example` file to `.env`

###  Run the application

Option 1

```bash
# install dependencies
uv sync

# start application using uv run
uv run uvicorn app.main:app --host 0.0.0.0 --port 8080 --reload
```

Option 2

With the docker-compose file, we can override some configurations from the Dockerfile and run it locally with our environment variables and a custom start command that enables hot reload.

```bash
# initiate application with Docker Compose (it will build only the first time)
docker compose up

# or build & run
docker compose up --build

# stop the container
docker-compose down
```

## Deployment

### Fly.io

Fly.io is a cloud platform that lets developers deploy web apps and databases globally, close to their users, using Docker containers for low latency and high performance.

Prerequisites:

- Account on Fly.io https://fly.io 
  - Using this link https://fly.io/fastapi-do-zero-2024 you have `$50` of credits
- Install Flyctl https://fly.io/docs/#ready-to-get-started


The first time:

```bash
# 1. check if you have flyctl installed
flyctl version

# 2. for authentication
flyctl auth login

# 3. to configure basic things, like app name and data center as well as creating fly.toml
flyctl launch --no-deploy  

# 4. create a volume (to store sqlite database and log files)
flyctl volumes create data --size=2

# 5. then go to your dashboard and set all env variables

# Notes: make sure to have `auto_stop_machines = 'off'` in fly.toml
```

In every deployment: 

```bash
fly deploy --local-only --ha=false

# For cost savings, I used "--local-only" and "--ha=false" options

# --local-only: the application's Docker image build process occurs on your local machine using your local Docker daemon, rather than on a remote builder instance hosted by Fly.io. To use you must have Docker installed and running on your local machine.

# --ha=false: if you want to run only a single machine (e.g., for testing, a minor project, or cost savings). This prevents the CLI from automatically creating the second, spare machine.
```

Others commands

```bash
# to connect to a running instance of your application
fly ssh console

# status
fly machines status

# view application logs as generated by the application running
fly logs

# all:
# https://fly.io/docs/flyctl/help/
```

## License 

Anyone is free to copy, modify, publish, use, compile, sell, or distribute this software, either in source code form or as a compiled binary, for any purpose, commercial or non-commercial, and by any means.

